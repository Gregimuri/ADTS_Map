// Конфигурация приложения
const CONFIG = {
    // ID вашей Google Таблицы
    SPREADSHEET_ID: '1BItr9-Q8qnN0S05sMh1YLMqCCfXuNm1E88dvpGkVNU0',
    
    // Названия столбцов
    COLUMN_NAMES: {
        name: ['Название ТТ', 'Название'],
        region: ['Регион'],
        address: ['Адрес'],
        status: ['Статус ТТ', 'Статус'],
        manager: ['Менеджер ФИО', 'Менеджер'],
        contractor: ['Подрядчик ФИО', 'Подрядчик']
    },
    
    // Маппинг статусов для группировки
    STATUS_MAPPING: {
        'сдан': 'Активная',
        'Сдан': 'Активная',
        'Активная': 'Активная',
        'Отправлен ФО, не принят': 'На паузе',
        'На паузе': 'На паузе',
        'Закрыта': 'Закрыта',
        'План': 'План'
    },
    
    // Цвета для статусов
    STATUS_COLORS: {
        'Активная': '#2ecc71',
        'сдан': '#2ecc71',
        'Сдан': '#2ecc71',
        'На паузе': '#f39c12',
        'Отправлен ФО, не принят': '#f39c12',
        'Закрыта': '#e74c3c',
        'План': '#3498db',
        'default': '#95a5a6'
    },
    
    // Настройки карты
    MAP: {
        center: [55.7558, 37.6173],
        zoom: 4,
        tileLayer: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        attribution: '&copy; OpenStreetMap contributors'
    },
    
    // Настройки обновления
    UPDATE: {
        auto: true,
        interval: 300000  // 5 минут
    },
    
    // НАСТРОЙКИ ГЕОКОДИРОВАНИЯ (ТОЛЬКО OSM - БЕЗ CORS ПРОБЛЕМ)
    GEOCODING: {
        enabled: true,
        // Только OpenStreetMap с улучшенной нормализацией
        delays: {
            nominatim: 1500  // 1.5 секунды между запросами (уважаем OSM API)
        },
        // Максимальное количество одновременных запросов
        maxConcurrent: 1,    // OSM требует 1 запрос в секунду
        // Автоматическое геокодирование при загрузке
        autoGeocode: true,
        // Кэширование (дней)
        cacheDays: 30,
        // Максимальное количество попыток
        maxRetries: 2,
        // Показывать приблизительные координаты до уточнения
        showApproximate: true,
        // Пользовательский агент для OSM (обязательно для корректной работы)
        osmUserAgent: 'TTMapOSM/1.0 (github.com/gregimuri/ADTS_Map)'
    },
    
    // Региональные центры для приблизительных координат
    REGION_CENTERS: {
        // Центральный регион
        'Москва': { lat: 55.7558, lng: 37.6173, radius: 0.05 },
        'Московская': { lat: 55.7558, lng: 37.6173, radius: 0.3 },
        
        // Северо-Западный
        'Санкт-Петербург': { lat: 59.9343, lng: 30.3351, radius: 0.05 },
        'Ленинградская': { lat: 59.9343, lng: 30.3351, radius: 0.3 },
        
        // Сибирский
        'Алтайский': { lat: 53.3481, lng: 83.7794, radius: 0.5 },
        'Новосибирская': { lat: 55.0084, lng: 82.9357, radius: 0.3 },
        'Красноярский': { lat: 56.0153, lng: 92.8932, radius: 0.5 },
        'Иркутская': { lat: 52.2864, lng: 104.2807, radius: 0.5 },
        
        // Уральский
        'Екатеринбург': { lat: 56.8389, lng: 60.6057, radius: 0.05 },
        'Свердловская': { lat: 56.8389, lng: 60.6057, radius: 0.3 },
        'Челябинская': { lat: 55.1644, lng: 61.4368, radius: 0.3 },
        
        // Приволжский
        'Казань': { lat: 55.7961, lng: 49.1064, radius: 0.05 },
        'Татарстан': { lat: 55.7961, lng: 49.1064, radius: 0.3 },
        'Нижегородская': { lat: 56.2965, lng: 43.9361, radius: 0.3 },
        'Самарская': { lat: 53.1959, lng: 50.1002, radius: 0.3 },
        
        // Южный
        'Краснодарский': { lat: 45.0355, lng: 38.9753, radius: 0.3 },
        'Ростовская': { lat: 47.2224, lng: 39.7189, radius: 0.3 },
        
        // Северо-Кавказский
        'Ставропольский': { lat: 45.0428, lng: 41.9734, radius: 0.3 },
        'Дагестан': { lat: 42.9831, lng: 47.5047, radius: 0.5 },
        
        // Дальневосточный
        'Владивосток': { lat: 43.1155, lng: 131.8855, radius: 0.1 },
        'Хабаровский': { lat: 48.4802, lng: 135.0719, radius: 0.5 },
        
        // Другие крупные регионы
        'Архангельская': { lat: 64.5401, lng: 40.5433, radius: 0.5 },
        'Астраханская': { lat: 46.3497, lng: 48.0408, radius: 0.5 },
        'Вологодская': { lat: 59.2181, lng: 39.8886, radius: 0.5 },
        'Воронежская': { lat: 51.6608, lng: 39.2003, radius: 0.3 },
        'Калининградская': { lat: 54.7104, lng: 20.4522, radius: 0.2 },
        'Кемеровская': { lat: 55.3547, lng: 86.0873, radius: 0.3 },
        'Омская': { lat: 54.9893, lng: 73.3682, radius: 0.3 },
        'Оренбургская': { lat: 51.7682, lng: 55.0968, radius: 0.3 },
        'Пермский': { lat: 58.0105, lng: 56.2502, radius: 0.3 },
        'Саратовская': { lat: 51.5924, lng: 45.9608, radius: 0.3 },
        'Тюменская': { lat: 57.1530, lng: 65.5343, radius: 0.3 },
        'Ульяновская': { lat: 54.3142, lng: 48.4031, radius: 0.3 },
        'Ярославская': { lat: 57.6261, lng: 39.8845, radius: 0.3 },
        
        // По умолчанию - центр России
        'default': { lat: 55.7558, lng: 37.6173, radius: 1.0 }
    },
    
    // Отладка
    DEBUG: false
};
